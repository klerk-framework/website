"use strict";(self.webpackChunkklerk_website=self.webpackChunkklerk_website||[]).push([[9150],{3378:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>s,contentTitle:()=>l,default:()=>h,frontMatter:()=>c,metadata:()=>a,toc:()=>r});var t=o(4848),i=o(8453);const c={sidebar_position:3},l="Collections",a={id:"building-config/collections",title:"Collections",description:"Each model you define will also have a corresponding collections object. This object has one or more collections, it",source:"@site/docs/building-config/collections.md",sourceDirName:"building-config",slug:"/building-config/collections",permalink:"/klerk/docs/building-config/collections",draft:!1,unlisted:!1,tags:[],version:"current",sidebarPosition:3,frontMatter:{sidebar_position:3},sidebar:"tutorialSidebar",previous:{title:"Context",permalink:"/klerk/docs/building-config/context"},next:{title:"DSL and functions",permalink:"/klerk/docs/building-config/pure-functions"}},s={},r=[{value:"Create your own collections",id:"create-your-own-collections",level:2}];function d(e){const n={admonition:"admonition",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h1,{id:"collections",children:"Collections"}),"\n",(0,t.jsxs)(n.p,{children:["Each model you define will also have a corresponding collections object. This object has one or more collections, it\ncontains at least the ",(0,t.jsx)(n.code,{children:"all"})," collection. The collections are used when retrieving data. As an example, if you have\nan Invoice model and want to read all invoices:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"clerk.read(context) { \n   val invoices = list(data.invoices.all) \n}\n"})}),"\n",(0,t.jsxs)(n.p,{children:['As you can see, the "all" collection for Invoice can be accessed via data.invoices.all. The "data" object is available\nin the Reader, which you acquire through ',(0,t.jsx)(n.code,{children:"clerk.read(context)"}),'. This "data" object contains all model collection objects\nand is something that you will have to create and tell the Clerk config builder about when you create the configuration:']}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"val config = ConfigBuilder<Ctx, Data>(myData).build {\n   ...\n}\n"})}),"\n",(0,t.jsxs)(n.admonition,{type:"tip",children:[(0,t.jsx)(n.p,{children:"If you are eager to get started, start with this:"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"object Data {\n    val invoices = ModelCollections<Invoice, Ctx>()    // add one property like this for each model you have\n}\n\nval config = ConfigBuilder<Ctx, Data>(Data).build {\n   ...\n}\n"})}),(0,t.jsx)(n.p,{children:"Skip the remaining of this chapter and return when you need to know more about collections."})]}),"\n",(0,t.jsx)(n.h2,{id:"create-your-own-collections",children:"Create your own collections"}),"\n",(0,t.jsx)(n.p,{children:"You can create your own collections and make them available in the model collections object. This is not mandatory but\ncan make your code more readable and allows Clerk to make some performance optimizations."}),"\n",(0,t.jsx)(n.p,{children:'Let\'s say you frequently read invoices that have the "approved" state. Instead of writing this in many places:'}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'clerk.read(context) { \n   val approvedInvoices = list(data.invoices.all) { it.state == "approved" }\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"you would like to access them like this:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:"clerk.read(context) { \n   val approvedInvoices = list(data.invoices.approved)\n}\n"})}),"\n",(0,t.jsx)(n.p,{children:"To achieve this, create your own InvoiceCollections object and use it in Data:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{children:'object InvoiceCollections : ModelCollections<Invoice, Ctx>() {\n    val approved = all.filter { it.state == "approved" }.register("approved")\n}\n\nobject Data {\n    val invoices = InvoiceCollections\n}\n'})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,o)=>{o.d(n,{R:()=>l,x:()=>a});var t=o(6540);const i={},c=t.createContext(i);function l(e){const n=t.useContext(c);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(c.Provider,{value:n},e.children)}}}]);